check=1

mapIds = {84500,84502,83300,83301,83302,83303,83304,83305,83306,84800}

bot_stop()

local function isitem()
	if item_if("遗忘之城传送石")~=0 then --有没有遗忘之城传送石--
		return true
	end
	printgame(0,255,0,"没有[遗忘之城传送石],此Lua结束")
	return false
end

local function isInMap()
	for i=1,#mapIds do
			if getmapid() ==mapIds[i] then
				return true
			end
	end
	return false
end

if not isInMap() then
	item_use(430458240)
end

local common = dofile(path_scripts.."S-M-auto-script\\lib\\common.lua")

common.simpleStart({
    mapName = "记忆深谷",
    mapCount = 3,
    planeId = nil,
    -- 地图名称列表，需和mapIds一一对应
    mapIds = {84500,84502,83300,83301,83302,83303,83304,83305,83306,84800},
    overtime = 20, --超时时间，/分钟
    endMapIds = {84800}, -- 结束一轮的地图id 默认为最后一张图，设置则以此值为准，没有可以不设置
    initSettings = {  -- 脚本初始化时的配置参数 可以不设置
        tobot_hit_range_max=100,
		tobot_hit_range_min=10,
		tobot_fastladder = 0, -- 取消快速爬梯，防止大桥下楼梯不稳定
    },
	isLuckyDog = true,
    -- 脚本名称列表，需和mapIds一一对应
    -- 支持16进制hex编码脚本
    -- 由于正则不通用，因此判断是否用hex的地方是字符串长度大于30
    scripts = {
       -- 
       "",
       -- 副本进门
       "D6C7C4DCD7AAC9ED2CD7F326D3D2CAB12C3830302C3738332CD3D2C5DC2C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C333136372C3738332CB2BBB1E42C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C333135302C3738332CB2BBB1E42C0D0AD7F3CCF82BC9CFC5C0CCDDD7D32CD7F326D3D2CAB12C323935302C313234372CD3D2C5DC2C",
       -- 1
       "D7F3CCF828D6FAC5DC292CD7F326D3D2CAB12C3733362C3330342CB2BBB1E40D0AD3D2CCF828D6FAC5DC292CD7F326D3D2CAB12C3733352C3733352CD3D2C5DC2C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C313234372C3731312CB2BBB1E42C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C313233322C3730382CB2BBB1E42C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C313230322C3730302CB2BBB1E42C",
       -- 2
       "D3D2CCF828D6FAC5DC292CD7F326D3D2CAB12C3736372C3733352CD3D2C5DC2C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C313234372C3731392CD3D2C5DC2C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C313233322C3731362CD3D2C5DC2C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C313231372C3731322CD3D2C5DC2C",
       -- 3
       "D7F3CCF828D6FAC5DC292CD7F326D3D2CAB12C3534342C3733352CD7F3C5DC2C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C33322C3539312CD7F3C5DC2C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C34372C3539312CD7F3C5DC2C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C36322C3539312CD7F3C5DC2C",
       -- 4
       "D7F3CCF828D6FAC5DC292CD7F326D3D2CAB12C3534342C3733352CD7F3C5DC2C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C33322C3238372CD7F3C5DC2C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C34372C3238372CD7F3C5DC2C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C36322C3238372CD7F3C5DC2C0D0AC9CFCCF82CD7F326D3D2CAB12C33322C3539312CD7F3C5DC2C",
       -- 5
       "D7F3CCF828D6FAC5DC292CD7F326D3D2CAB12C3534342C3733352CD7F3C5DC2C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C33322C3539312CD7F3C5DC2C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C34372C3539312CD7F3C5DC2C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C36322C3539312CD7F3C5DC2C",
       -- boss
       "BDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C33322C3633392CB2BBB1E42C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C34372C3633392CB2BBB1E42C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C36322C3633392CB2BBB1E42C",
       -- boss后
       "BDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C37392C3633392CB2BBB1E42C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C39342C3633392CB2BBB1E42C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C3130392C3633392CB2BBB1E42C",
	   -- 
	   "D7F3CCF828D6FAC5DC292CD7F326D3D2CAB12C3534342C3733352CD7F3C5DC2C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C33322C3539312CD7F3C5DC2C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C34372C3539312CD7F3C5DC2C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C36322C3539312CD7F3C5DC2C",
	   -- 副本10
	   "",
	   -- 副本11
	   "",
	   -- 副本12
	   "",
	   -- 副本13
	   "",
	   -- 副本14
	   "",
	   -- 副本15
	   "",
	   -- 副本16
	   "",
	   -- 副本17
	   "",
	},
	 onScriptRound = function (config) -- 副本每次切换地图回调
		if getmapid()==84502 then
			ini_change("tobot_giveitem",0)
		end
		if getmapid()==83300 then
			ini_change("tobot_giveitem",1)
		end
		if(getmapid()==84500)then
			repeat
			sleep(100)
				open_npc(833014)
				npc_plane(833014,833014,1,8330142,100)
				close_npc(833014)
			until(getmapid()~=84500)
		end
    end
})