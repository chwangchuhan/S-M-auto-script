check=1

local common = dofile(path_scripts.."S-M-auto-script\\lib\\common.lua")

common.simpleStart({
    mapName = "隐藏的洞穴",
    mapCount = 3,
    planeId = 255,
    overtime = 30, --超时时间，/分钟
    -- 地图名称列表，需和mapIds一一对应
    mapIds = {33304, 33200, 33201 ,33202, 33203, 33204, 33205, 33206},
    -- 脚本名称列表，需和mapIds一一对应
    -- 支持16进制hex编码脚本
    -- 由于正则不通用，因此判断是否用hex的地方是字符串长度大于30
	isLuckyDog = true,
    scripts = {
       -- 蘑菇森林5
       "BDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C3333392C313335392CD7F3C5DC2C0D0AD6C7C4DCD7AAC9ED2CD7F326D3D2CAB12C313039392C313335392CD7F3C5DC2C",
       -- 隐藏洞穴1
       "BDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C313135342C313239352CD7F3C5DC2CD6B4D0D0BAF3B5C8B4FDA3A8BAC1C3EBA3A92C31303030",
       -- 隐藏洞穴2
       "D3D2CCF828D6FAC5DC292CD3D2C5DCCAB12C3638302C3331392CB2BBB1E42C0D0AD7F3CCF828D6FAC5DC292CD7F3C5DCCAB12C3736302C3731392CD3D2C5DC2C0D0AD7F3CCF828D6FAC5DC292CD7F3C5DCCAB12C313133322C313335332CB2BBB1E42C0D0AD7F3CCF828D6FAC5DC292CD7F3C5DCCAB12C313135322C313334332CB2BBB1E42C0D0AD6C7C4DCD7AAC9ED2CD7F3C5DCCAB12C3630302C313636332CD3D2C5DC2C0D0AD6C7C4DCD7AAC9ED2CD7F3C5DCCAB12C3632302C313636332CD3D2C5DC2C0D0ACEBBD6C3B6A8CEBB2CD7F3C5DCCAB12C313634302C323436332CB2BBB1E42C0D0AD7F3CCF828D6FAC5DC292CD7F3C5DCCAB12C313634302C323436332CB2BBB1E42C0D0AD7F3CCF82CD7F3C5DCCAB12C313135312C323935392CB2BBB1E42C0D0AD7F3CCF82CD7F3C5DCCAB12C313132312C323935392CB2BBB1E42C0D0AD7F3CCF82CD7F3C5DCCAB12C313131372C323935392CB2BBB1E42C0D0AD7F3CCF82CD7F3C5DCCAB12C313038322C323935392CB2BBB1E42C0D0AD7F3CCF82CD7F3C5DCCAB12C313139322C323935392CB2BBB1E42C0D0AD6C7C4DCD7AAC9ED2CD7F3C5DCCAB12C313230322C353037312CD3D2C5DC2C0D0ACEBBD6C3B6A8CEBB2CD7F3C5DCCAB12C313631362C353037312CB2BBB1E42C0D0ACFC2C5C0CCDDD7D32CD7F3C5DCCAB12C313631362C353037312CB2BBB1E42C0D0AD6C7C4DCD7AAC9ED2CD7F3C5DCCAB12C3732302C353532302CD3D2C5DC2C0D0ACEBBD6C3B6A8CEBB2CD3D2C5DCCAB12C3333302C363230372CB2BBB1E42C0D0AD3D2CCF828D6FAC5DC292CD3D2C5DCCAB12C3333302C363230372CD7F3C5DC2C0D0AD6C7C4DCD7AAC9ED2CD7F3C5DCCAB12C3432302C363436332CD3D2C5DC2C0D0ACEBBD6C3B6A8CEBB2CD3D2C5DCCAB12C3734302C363436332CB2BBB1E42C0D0AD3D2CCF828D6FAC5DC292CD3D2C5DCCAB12C3734302C363436332CD3D2C5DC2C0D0AD7F3CCF82CD7F3C5DCCAB12C313231312C373234372CB2BBB1E42C0D0ABDF8C8EBB4ABCBCDC3C52CD7F3C5DCCAB12C313739382C393239352CB2BBB1E42C",
       -- 隐藏洞穴3
       "D3D2CCF82CD7F326D3D2CAB12C3434372C313239352CD3D2C5DC2CCAB9D3C3BCBCC4DC2C393837393939390D0ACEBBD6C3B6A8CEBB2CD3D2C5DCCAB12C313537302C313033392CB2BBB1E42C0D0AD3D2CCF828D6FAC5DC292CD3D2C5DCCAB12C313537302C313033392CD7F3C5DC2C0D0ACEBBD6C3B6A8CEBB2CD3D2C5DCCAB12C323031392C313136372CB2BBB1E42C0D0AD3D2CCF828D6FAC5DC292CD3D2C5DCCAB12C323031392C313136372CD7F3C5DC2C0D0AD3D2CCF82CD7F326D3D2CAB12C333634372C313239352CD3D2C5DC2C0D0AD3D2CCF82CD7F326D3D2CAB12C343534332C313033392CD3D2C5DC2C0D0AD3D2CCF82CD7F326D3D2CAB12C343739392C3738332CD3D2C5DC2C0D0AC9CFCCF82CD7F3C5DCCAB12C373232302C313239352CD3D2C5DC2CCAB9D3C3BCBCC4DC2C393837393939390D0AD6C7C4DCD7AAC9ED2CD7F3C5DCCAB12C373430322C313033392CD3D2C5DC2C0D0AD7F3CCF8A3A8B6E0B6CECCF8A3A92CD7F3C5DCCAB12C383634302C313239352CB2BBB1E42C0D0ACEBBD6C3B6A8CEBB2CD3D2C5DCCAB12C393432382C313239352CB2BBB1E42C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C393430382C313239352CB2BBB1E42C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C393432382C313239352CB2BBB1E42C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C393436382C313239352CB2BBB1E42C0D0AD7F3CCF8A3A8B6E0B6CECCF8A3A92CD7F3C5DCCAB12C363030372C313033392CB2BBB1E42C0D0AD7F3CCF8A3A8B6E0B6CECCF8A3A92CD7F3C5DCCAB12C353935322C313033392CB2BBB1E42C0D0AD7F3CCF8A3A8B6E0B6CECCF8A3A92CD7F3C5DCCAB12C363333372C313239352CB2BBB1E42C0D0AD7F3CCF8A3A8B6E0B6CECCF8A3A92CD7F3C5DCCAB12C353536382C3738332CB2BBB1E42C",
       -- 隐藏洞穴4
       "BDF8C8EBB4ABCBCDC3C52CD3D2C5DCCAB12C3636312C313130332CB2BBB1E42C0D0ABDF8C8EBB4ABCBCDC3C52CD3D2C5DCCAB12C3638312C313130332CB2BBB1E42C",
       -- 隐藏洞穴5
       "BDF8C8EBB4ABCBCDC3C52CD3D2C5DCCAB12C3637372C313138332CB2BBB1E42C0D0ACEBBD6C3B6A8CEBB2CD3D2C5DCCAB12C3637372C313138332CB2BBB1E42C",
       -- 隐藏洞穴6
       "BDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C3132312C313130332CB2BBB1E42C",
       -- 隐藏洞穴7
       "D6BBD6B4D0D0B2CECAFD2CD7F326D3D2CAB12C39362C313239352CB2BBB1E42CCAB9D3C3B7C9BBFA2C3235350D0AC9CFCCF82CD3D2C5DCCAB12C383738302C313239352CD7F3C5DC2CCAB9D3C3BCBCC4DC2C393837393939390D0AC9CFCCF82CD3D2C5DCCAB12C383235302C313136372CD7F3C5DC2CCAB9D3C3BCBCC4DC2C393837393939390D0AD7F3CCF828D6FAC5DC292CD7F3C5DCCAB12C373439382C313033392CD7F3C5DC2C0D0AD7F3CCF82CD7F326D3D2CAB12C363333362C313239352CD7F3C5DC2C0D0AD7F3CCF82CD3D2C5DCCAB12C363135302C313033392CD7F3C5DC2C0D0AD7F3CCF82CD3D2C5DCCAB12C353735302C3738332CD7F3C5DC2CCAB9D3C3BCBCC4DC2C393837393939390D0AD7F3CCF828D6FAC5DC292CD7F326D3D2CAB12C343035372C3630372CD3D2C5DC2C0D0AD7F3CCF828D6FAC5DC292CD7F326D3D2CAB12C333737302C313033392CD3D2C5DC2C0D0AC9CFCCF82CD3D2C5DCCAB12C323239302C313239352CD7F3C5DC2CCAB9D3C3BCBCC4DC2C393837393939390D0AC9CFCCF82CD3D2C5DCCAB12C313838302C313136372CD7F3C5DC2CCAB9D3C3BCBCC4DC2C393837393939390D0AD7F3CCF828D6FAC5DC292CD7F326D3D2CAB12C373439382C313033392CD7F3C5DC2C",
    },
    -- 任务列表
    -- 任务会在跳转到对应地图时执行，因此如mapId中未配置或者初始飞机不在任务地点则无法领取任务
    -- 不同npc或不同地图的任务请配置多个task
    tasks = {
		 {
            mapId = 33304,
            npcId = 7098,
            taskIds = {154008088},
        }
	},
    onScriptRound = function (config) -- 副本每次切换地图回调
        if (getmapid() == 33201) then
            local isBacking = false -- 是否正在返回
			while(true)
            do 
                sleep(150)
                if (gety() >= 9100 and getx() >= 1800 ) then
                    if door_if(1806, 9295) == 1 then -- 人在最下面且门已开
                        speak('1楼门已开')
                        break
                    elseif (not isBacking) then
                        bot_stop()--停止挂机--
                        print(1)
                        isBacking = true
                        speak('开始返回顶部')
                        sleep(100)
                        
                        gotocoordinate(1, 413, 9295) --走至传送门
                        for i=1,50 do
                            if (gety() > 100) then
                                jmp(1)
						        sleep(900)
                            end
                        end
                        bot_start()
                        isBacking = false
                    end
                end
			end
        end
    end,
	onScriptEnd = function  ()
        -- 放弃未完成任务
        common.dropTask({154008088})
    end,
})