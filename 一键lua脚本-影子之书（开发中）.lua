check=1

local common = dofile(path_scripts.."S-M-auto-script\\lib\\common.lua")

-- common.

-- if not common.checkInMap({20004}) then
--     -- 飞机启动执行 --
--     plane(30571)
--     wait_loadmap()
-- end

-- -- 领任务
-- script_txt_loaddata('BDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C313833392E34382C3632332CB2BBB1E42CD6B4D0D0BAF3B5C8B4FDA3A8BAC1C3EBA3A92C32303030', 0)
-- sleep(10000)
-- common.doTask(938415, {985701})


local yaoshiList = {
    '钥匙F[影子之书]',
}

common.simpleStart({
    mapName = "影子之书",
    mapCount = 2,
    planeId = 96107,
    overtime = 60, --超时时间，/分钟
    -- 地图名称列表，需和mapIds一一对应
    mapIds = {20004, 20000, 58600.0},
    -- 脚本名称列表，需和mapIds一一对应
    -- 支持16进制hex编码脚本
    -- 由于正则不通用，因此判断是否用hex的地方是字符串长度大于30
    scripts = {
       -- 大厅
       "BDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C313833392E34382C3632332CB2BBB1E42CD6B4D0D0BAF3B5C8B4FDA3A8BAC1C3EBA3A92C32303030",
       -- 任务领取地点
       "",
       -- 目录：选择窗口
       "",
       -- 冰淇淋1
       "BDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C313738382C313433392CB2BBB1E42C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C313737382C313433392CB2BBB1E42C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C313830302C313433392CB2BBB1E42C0D0AD6BBD6B4D0D0B2CECAFD2CD7F3C5DCCAB12C313832332C313433392CB2BBB1E42CCAB9D3C3BCBCC4DC2C333831363030340D0AD6BBD6B4D0D0B2CECAFD2CD3D2C5DCCAB12C313430302C313433392CB2BBB1E42CCAB9D3C3BCBCC4DC2C33383136303034",
       -- 冰淇淋2
       "D6C7C4DCD7AAC9ED2CD7F3C5DCCAB12C3833322C3739392CD3D2C5DC2C0D0AD6C7C4DCD7AAC9ED2CD3D2C5DCCAB12C323336372C3739392CD7F3C5DC2C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C313439382C3739392CB2BBB1E42C0D0AD3D2CCF82CD7F326D3D2CAB12C3238392C3739392CD7F3C5DC2C0D0AD6C7C4DCD7AAC9ED2CD7F3C5DCCAB12C33322C3739392CD3D2C5DC2C0D0AD6C7C4DCD7AAC9ED2CD7F3C5DCCAB12C3831322C3434372CD3D2C5DC2C0D0AD6C7C4DCD7AAC9ED2CD3D2C5DCCAB12C333136372C3739392CD7F3C5DC2C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C323939342C3739392CB2BBB1E42C0D0AD6C7C4DCD7AAC9ED2CD7F3C5DCCAB12C33322C313433392CD3D2C5DC2C0D0AD6C7C4DCD7AAC9ED2CD3D2C5DCCAB12C333136372C313433392CD7F3C5DC2C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C333030322C313433392CB2BBB1E42C",
       -- 冰淇淋3
       "C9CFCCF82CD7F326D3D2CAB12C323131312C313433392CD3D2C5DC2CC3BBD3D0B8BDBCD3B2CECAFD2CC3BBD3D0B8BDBCD3B2CECAFD0D0AD3D2CCF82CD7F326D3D2CAB12C313832372C313131392CD3D2C5DC2CC3BBD3D0B8BDBCD3B2CECAFD2CC3BBD3D0B8BDBCD3B2CECAFD0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C323939362C3833312CD3D2C5DC2CC3BBD3D0B8BDBCD3B2CECAFD2CC3BBD3D0B8BDBCD3B2CECAFD0D0A",
       -- 冰淇淋4
       "C9CFCCF82CD7F326D3D2CAB12C323435302C313433392CB2BBB1E42C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C313632322C313433392CB2BBB1E42C0D0AD6C7C4DCD7AAC9ED2CD7F326D3D2CAB12C3731342C3537352CD3D2C5DC2C0D0AD3D2CCF82CD3D2C5DCCAB12C313232322C3537352CD3D2C5DC2C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C333039342C3434372CD3D2C5DC2C0D0AC9CFCCF82CD7F326D3D2CAB12C313031362C313433392CB2BBB1E42C0D0AD3D2CCF82CD7F326D3D2CAB12C313836372C313433392CB2BBB1E42C0D0AD3D2CCF828D6FAC5DC292CD3D2C5DCCAB12C313236392E36392C313131392E34342CD7F3C5DC2C",
       -- 冰淇淋5
       "BDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C313438392C313433392CD3D2C5DC2CC3BBD3D0B8BDBCD3B2CECAFD2CC3BBD3D0B8BDBCD3B2CECAFD0D0AD6C7C4DCD7AAC9ED2CD7F326D3D2CAB12C323439332C3935392CD7F3C5DC2CC3BBD3D0B8BDBCD3B2CECAFD2CC3BBD3D0B8BDBCD3B2CECAFD0D0AD6C7C4DCD7AAC9ED2CD7F326D3D2CAB12C3735352C3935392CD3D2C5DC2CC3BBD3D0B8BDBCD3B2CECAFD2CC3BBD3D0B8BDBCD3B2CECAFD0D0AD3D2CCF82CD7F326D3D2CAB12C3132352C313433392CD3D2C5DC2CC3BBD3D0B8BDBCD3B2CECAFD2CC3BBD3D0B8BDBCD3B2CECAFD0D0AD3D2CCF82CD7F326D3D2CAB12C3437392C313131392CD3D2C5DC2CC3BBD3D0B8BDBCD3B2CECAFD2CC3BBD3D0B8BDBCD3B2CECAFD0D0AD7F3CCF82CD7F326D3D2CAB12C323937362C313433392CD7F3C5DC2CC3BBD3D0B8BDBCD3B2CECAFD2CC3BBD3D0B8BDBCD3B2CECAFD0D0AD7F3CCF82CD7F326D3D2CAB12C323732302C313131392CD7F3C5DC2CC3BBD3D0B8BDBCD3B2CECAFD2CC3BBD3D0B8BDBCD3B2CECAFD0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C313336352C3935392CB2BBB1E42CC3BBD3D0B8BDBCD3B2CECAFD2CC3BBD3D0B8BDBCD3B2CECAFD0D0AD6C7C4DCD7AAC9ED2CD7F326D3D2CAB12C333136372C3437392CD7F3C5DC2CC3BBD3D0B8BDBCD3B2CECAFD2CC3BBD3D0B8BDBCD3B2CECAFD0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C333035372C3437392CD7F3C5DC2CC3BBD3D0B8BDBCD3B2CECAFD2CC3BBD3D0B8BDBCD3B2CECAFD",
       -- 冰淇淋6
       "BDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C333037382C3535392CB2BBB1E42CC3BBD3D0B8BDBCD3B2CECAFD2CC3BBD3D0B8BDBCD3B2CECAFD0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C333035392C313433392CB2BBB1E42CC3BBD3D0B8BDBCD3B2CECAFD2CC3BBD3D0B8BDBCD3B2CECAFD0D0A",
       -- 冰淇淋7
       "BDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C3134392C3739392CB2BBB1E42CC3BBD3D0B8BDBCD3B2CECAFD2CC3BBD3D0B8BDBCD3B2CECAFD0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C333035312C3535392CB2BBB1E42CC3BBD3D0B8BDBCD3B2CECAFD2CC3BBD3D0B8BDBCD3B2CECAFD0D0AD7F3CCF82CD7F326D3D2CAB12C313133332C313433392CD7F3C5DC2CC3BBD3D0B8BDBCD3B2CECAFD2CC3BBD3D0B8BDBCD3B2CECAFD0D0AD7F3CCF82CD7F326D3D2CAB12C3637322C313131392CD7F3C5DC2CC3BBD3D0B8BDBCD3B2CECAFD2CC3BBD3D0B8BDBCD3B2CECAFD0D0AD7F3CCF82CD7F326D3D2CAB12C3438302C3935392CB2BBB1E42CC3BBD3D0B8BDBCD3B2CECAFD2CC3BBD3D0B8BDBCD3B2CECAFD",
       -- 冰淇淋8
       "D3D2CCF82CD7F326D3D2CAB12C3534332C313433392CD3D2C5DC2C0D0AD3D2CCF82CD7F326D3D2CAB12C3739392C313131392CB2BBB1E42C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C313633392C313433392CB2BBB1E42C0D0AD7F3CCF82BC9CFC5C0CCDDD7D32CD7F326D3D2CAB12C323135302C3935392CB2BBB1E42C0D0AD6C7C4DCD7AAC9ED2CD7F326D3D2CAB12C323638352C3439352CD7F3C5DC2C0D0AD6C7C4DCD7AAC9ED2CD7F326D3D2CAB12C3539322C3439352CD3D2C5DC2C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C313633362C3439352CD3D2C5DC2C0D0AD7F3CCF82CD7F326D3D2CAB12C323635362E36372C313433392E322CB2BBB1E42C0D0AD7F3CCF82BC9CFC5C0CCDDD7D32CD7F326D3D2CAB12C323430302E33392C313131392E39362CB2BBB1E42C0D0ACFC2C5C0CCDDD7D32CD7F326D3D2CAB12C313133362C3636332CD3D2C5DC2C",
       -- 冰淇淋9
       "D3D2CCF82CD3D2C5DCCAB12C313732372E30392C313433392E37382CB2BBB1E42C0D0AD7F3CCF82CD3D2C5DCCAB12C323336372E30352C313131392E30362CD7F3C5DC2C0D0AD7F3CCF82CD7F3C5DCCAB12C3332302E39352C3733352E3331372CD3D2C5DC2C0D0AD3D2CCF82CD7F326D3D2CAB12C33322C3431352CD3D2C5DC2C0D0AD3D2CCF82CD3D2C5DCCAB12C38362E382C3431352E3237372CB2BBB1E42C0D0AD7F3CCF828D6FAC5DC292CD7F3C5DCCAB12C3535312E3330392C3333352E342CD3D2C5DC2C0D0AD3D2CCF828D6FAC5DC292CD3D2C5DCCAB12C313934312C3733352E32342CD7F3C5DC2C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C333036322C3333352E36382CB2BBB1E42C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C333038322C3333352E36382CB2BBB1E42C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C333130322C3333352E36382CB2BBB1E42C0D0AC9CFCCF8A3A8B6E0B6CECCF8A3A92CD7F326D3D2CAB12C333136372C3839352CD3D2C5DC2C",
       -- 冰淇淋10
       "BDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C3839392C313433392CD3D2C5DC2CC3BBD3D0B8BDBCD3B2CECAFD2CC3BBD3D0B8BDBCD3B2CECAFD0D0A",
       -- 冰淇淋11
       "BDF8C8EBB4ABCBCDC3C52CD7F3C5DCCAB12C3930392C313433392CB2BBB1E42CABDF8C8EBB4ABCBCDC3C52CD7F3C5DCCAB12C3931392C313433392CB2BBB1E42CABDF8C8EBB4ABCBCDC3C52CD7F3C5DCCAB12C3839392C313433392CB2BBB1E42C",
    },
    -- 任务列表
    -- 任务会在跳转到对应地图时执行，因此如mapId中未配置或者初始飞机不在任务地点则无法领取任务
    -- 不同npc或不同地图的任务请配置多个task
    tasks = {
        {
            mapId = 20000,
            npcId = 938415,
            taskIds = {985701},
            planeId = 96107,
        }
    },
    onScriptRound = function () -- 副本每次切换地图回调
        local mapId = getmapid()
        print(task_get_state(985701))
        
        if (mapId == 20004 and task_get_state(985701) == 2) then
            script_txt_loaddata('CEBBD6C3B6A8CEBB2CD7F326D3D2CAB12C3135342E3935392C3632332CD7F3C5DC2CC3BBD3D0B8BDBCD3B2CECAFD2C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C3135342E3935392C3632332CD7F3C5DC2CC3BBD3D0B8BDBCD3B2CECAFD2C', 0) -- 进入传送门
        end
    end,

    onScriptWhileCallback = function () -- 每次脚本内while触发
        
    end,
})