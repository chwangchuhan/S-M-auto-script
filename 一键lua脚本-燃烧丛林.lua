check=1

local common = dofile(path_scripts.."S-M-auto-script\\lib\\common.lua")
 
common.simpleStart({
    mapName = "燃烧丛林",
    mapCount = 3,
    planeId = 144,
    -- 地图名称列表，需和mapIds一一对应
    mapIds = {4703,23100,23101,23102,23103,23104,23105},
	endMapIds = {23105}, -- 结束一轮的地图id 默认为最后一张图，设置则以此值为准，没有可以不设置
	initSettings = {  -- 脚本初始化时的配置参数 可以不设置
		tobot_fastladder = 0, -- 取消快速爬梯，防止大桥下楼梯不稳定
		tobot_hit_range_top = 200,
	},
    -- 脚本名称列表，需和mapIds一一对应
    -- 支持16进制hex编码脚本
    -- 由于正则不通用，因此判断是否用hex的地方是字符串长度大于30
	isLuckyDog = true,
    scripts = {
        "D6C7C4DCD7AAC9ED2CD7F326D3D2CAB12C313230302C3339392CD7F3C5DC2C0D0AD6C7C4DCD7AAC9ED2CD7F326D3D2CAB12C3735302C3339392CD3D2C5DC2C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C313133342C3339392CB2BBB1E42C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C313131392C3339392CB2BBB1E42C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C313130342C3339392CB2BBB1E42C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C313038392C3339392CB2BBB1E42C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C313037342C3339392CB2BBB1E42C0D0AD6BBD6B4D0D0B2CECAFD2CD7F326D3D2CAB12C333136372C313331312CB2BBB1E42CCAB9D3C3B7C9BBFA2C3134340D0AD6BBD6B4D0D0B2CECAFD2CD7F326D3D2CAB12C323439352C313433392CB2BBB1E42CCAB9D3C3B7C9BBFA2C3134340D0AD6BBD6B4D0D0B2CECAFD2CD7F326D3D2CAB12C33322C313433392CB2BBB1E42CCAB9D3C3B7C9BBFA2C313434",
        "C9CFCCF8A3A8B6E0B6CECCF8A3A92CD7F326D3D2CAB12C333136372C313034302CB2BBB1E42C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C333135322C3532382CB2BBB1E42C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C333133372C3532382CB2BBB1E42C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C333132322C3532382CB2BBB1E42C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C333130372C3532382CB2BBB1E42C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C333039322C3532382CB2BBB1E42C",
        "D3D2CCF82CD7F326D3D2CAB12C313331312C313236342CD3D2C5DC2C0D0AD7F3CCF82CD7F3C5DCCAB12C313634302C313034302CB2BBB1E42C0D0AC9CFCCF8A3A8B6E0B6CECCF8A3A92CD3D2C5DCCAB12C3836302C3831362CB2BBB1E42C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C333136372C3531322CB2BBB1E42C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C333135322C3531322CB2BBB1E42C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C333133372C3531322CB2BBB1E42C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C333132322C3531322CB2BBB1E42C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C333130372C3531322CB2BBB1E42C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C333039322C3531322CB2BBB1E42C",
        "D6C7C4DCD7AAC9ED2CD7F326D3D2CAB12C323738302C3438302CD7F3C5DC2C0D0AC9CFCCF8A3A8B6E0B6CECCF8A3A92CD7F326D3D2CAB12C33322C313331322CD7F3C5DC2C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C333131372C313032342CB2BBB1E42C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C333136372C313032342CB2BBB1E42C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C333135322C313032342CB2BBB1E42C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C333130372C313032342CB2BBB1E42C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C333039322C313032342CB2BBB1E42C",
        "D7F3CCF82CD7F3C5DCCAB12C3533302C313239362CB2BBB1E42C0D0AD3D2CCF8A3A8B6E0B6CECCF8A3A92CD7F326D3D2CAB12C323035302C3637322CB2BBB1E42C0D0AD7F3CCF828D6FAC5DC292CD7F326D3D2CAB12C323733302C3336382CB2BBB1E42C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C333136372C3332302CB2BBB1E42C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C333135322C3332302CB2BBB1E42C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C333132322C3332302CB2BBB1E42C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C333039322C3332302CB2BBB1E42C",
		"D6C7C4DCD7AAC9ED2CD7F326D3D2CAB12C3736372C313430382CD7F3C5DC2C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C3730312E3633342C313430382CB2BBB1E42C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C3637312E3633342C313430382CB2BBB1E42C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C3634312E3633342C313430382CB2BBB1E42C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C3631312E3633342C313430382CB2BBB1E42C",
		"D6C7C4DCD7AAC9ED2CD7F326D3D2CAB12C3736372C313430382CD7F3C5DC2C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C3730312E3633342C313430382CB2BBB1E42C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C3637312E3633342C313430382CB2BBB1E42C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C3634312E3633342C313430382CB2BBB1E42C0D0ABDF8C8EBB4ABCBCDC3C52CD7F326D3D2CAB12C3631312E3633342C313430382CB2BBB1E42C",
	},
    -- 任务列表
    -- 任务会在跳转到对应地图时执行，因此如mapId中未配置或者初始飞机不在任务地点则无法领取任务
    -- 不同npc或不同地图的任务请配置多个task
    tasks = {},
	 onScriptRound = function  ()
		if getmapid()==23100 then
			ini_change("tobot_giveitem",0)
		end
		if getmapid()==23105 then
			useskill(43501018,1)
			ini_change("tobot_hit_range_max",600)
			ini_change("tobot_giveitem",1)
			sleep(100)
			repeat
				sleep(100)
				ini_change("tobot_hit_range_top",200)
				local mobId = mob_obj_get('大魔王分神')
				local mobY = mob_obj_y(mobId)
				if mobId~=0 then
					ini_change("tobot_hit_range_max",600)
					ini_change("find_zhiding","大魔王分神")
					ini_change("find_is_zhiding",1)
					if isbuff('一花一世界，一叶一菩提')==0 then  --无敌
						useskill(5000420,1)	--灵宠
						sleep(10)
						if isbuff('灵宠技能效果')==0 then --魔免
							useskill(43501022,1)
							sleep(10)
							if isbuff('每天都要美美哒')==0 then --魔免
								useskill(43501025,1)
								sleep(10)
								if isbuff('破坏王技能')==0 then
									useskill(43501018,1)
									sleep(10)
								end
							end
						end
					end
				else
					ini_change("tobot_hit_range_max",300)
					ini_change("find_is_zhiding",0)
				end				
			until(mobId==0)
		end
    end,
})
 